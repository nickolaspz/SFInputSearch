if(!window.jQuery)throw"SFInputSearch:: jQuery is required to load plugin. Make sure you are loading it before SFInputSearch";!function(e){e.fn.SFInputSearch=((t,n)=>{var l=null;if(null==t||null==t[0])throw"SFInputSearch:: Invalid selector";l=t[0];var i=null,o=e.extend({},{type:null,allowEdit:!0,allowRemove:!0,optional:{footerOption:{label:null,onClick:()=>{}}},populate:(e,t)=>{},onSelect:e=>{},onRemove:()=>{},onEdit:()=>{},onCreate:()=>{}},n);function a(){var t=this;return this.optional={footerOption:{label:null,onClick:()=>{}}},this.elements={label:null,input:{object:null,container:null,input:null,dropdownContainer:null,dropdown:null},pill:{object:null,label:null}},this.AssembleInputAndPill=(()=>{var e=new s;t.elements.label=new p(t),t.elements.input.object=new r(t),t.elements.pill.object=new d(t),e.appendChild(t.elements.label),e.appendChild(t.elements.input.object),e.appendChild(t.elements.pill.object),l&&(l.innerHTML="",l.appendChild(e))}),this.Populate=(()=>{var n=i="xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(e){var t=16*Math.random()|0,n="x"==e?t:3&t|8;return n.toString(16)});t.elements.input.dropdown.innerHTML="";var l=t.elements.input.dropdown;if(0==l.childNodes.length&&e(l).append('<span class="sfis-dropdown-item">'+getMiniLoader()+"</span>"),"function"==typeof t.populate){new Promise(function(e,n){t.populate(t.elements.input.input.value,e)}).then(l=>{if(i==n)for(var a in e(t.elements.input.dropdown).empty(),0==l[o.type].length&&null==o.optional.footerOption.label?t.elements.input.dropdownContainer.style.display="none":""!=t.elements.input.input.value&&(t.elements.input.dropdownContainer.style.display="block"),l[o.type]){var d="";for(var s in l[o.type][a])null!=l[o.type][a][s]&&"object"!=typeof l[o.type][a][s]&&(d+="data-"+s+'="'+l[o.type][a][s]+'" ');e(t.elements.input.dropdown).append(function(){return e('<a id="dropdown-item-'+a+'" class="sfis-dropdown-item" href="#"'+d+">"+(n=l[o.type][a],null==n.sub?n.label:n.label+' <small style="color:grey">('+n.sub+")</small>")+"</a>").click(n=>{var l=e(n.currentTarget).data();t.SetSelected(l)});var n})}})}}),this.Remove=(()=>{t.elements.pill.object.style.display="none",t.elements.input.input.style.display="inline",t.DropdownHotfix(),t.onRemove()}),this.ClearInput=(()=>{t.elements.input.input.value=""}),this.Edit=(()=>{t.onEdit()}),this.DropdownHotfix=(()=>{t.elements.input.dropdownContainer.style.position="absolute",t.elements.input.dropdownContainer.style.transform="none"}),this.SetSelected=(e=>{t.elements.pill.label.innerHTML=e.label,t.elements.input.input.value="",t.elements.input.input.style.display="none",t.elements.input.dropdownContainer.style.display="none",t.elements.pill.object.style.display="flex",t.onSelect(e)}),this.GetInputId=(()=>o.type+"-input-"+t.id),this.ReInitialize=(()=>{t.AssembleInputAndPill()}),this.UpdateSettings=(n=>{o=e.extend({},o,n),t.ReInitialize()}),this}function d(e){var t=document.createElement("div");t.classList.add("slds-pill_container");var n=document.createElement("div");n.classList.add("slds-pill"),n.style.backgroundColor="initial",o.allowRemove||(n.style.backgroundColor="#d8d8d8");var l=document.createElement("button");if(l.classList.add("slds-pill_remove"),l.classList.add("slds-button"),l.classList.add("slds-icon"),o.allowEdit){l.title="edit",l.addEventListener("click",()=>{e.Edit()});var i=document.createElement("img");i.src="img/pencil-alt-solid.svg",i.style.width="10px",l.appendChild(i)}else l.style.cursor="default";n.appendChild(l);var a=document.createElement("span");a.classList.add("slds-pill_label"),e.elements.pill.label=a,n.appendChild(a);var d=document.createElement("button");if(d.classList.add("slds-pill_remove"),d.classList.add("slds-button"),d.classList.add("slds-icon"),o.allowRemove){d.title="remove",d.addEventListener("click",()=>{e.Remove()});var s=document.createElement("img");s.src="img/times-solid.svg",s.style.width="10px",d.appendChild(s)}else d.style.cursor="default";return n.appendChild(d),t.appendChild(n),t}function s(){var e=document.createElement("div");return e.classList.add("sfis-form-group"),e.style.position="relative",e.style.color="rgb(8, 7, 7)",e}function p(e){var t=document.createElement("label"),n=o.type.charAt(0).toUpperCase()+o.type.slice(1);return null!=o.label&&(n=o.label),t.innerHTML=n,t.setAttribute("for",o.type+"-input-"+e.id),t}function r(e){var t=document.createElement("div");t.classList.add(o.type+"-input-container");var n=document.createElement("input");n.classList.add("sfis-form-control"),n.setAttribute("type","text"),n.setAttribute("name",o.type+"-input-"+e.id),n.setAttribute("autcomplete","new-password"),n.addEventListener("keyup",function(){e.Populate()}),n.id=o.type+"-input-"+e.id,e.elements.input.input=n,t.appendChild(n);var l=document.createElement("div");l.classList.add("sfis-dropdown-menu"),l.style.width="100%",l.id=o.type+"-list";var i=document.createElement("div");if(i.id=o.type+"-list-drop",e.elements.input.dropdown=i,l.appendChild(i),o.optional.footerOption.label){var a=document.createElement("hr");l.appendChild(a);var d=document.createElement("div");d.classList.add("sfis-dropdown-item"),d.href="#",d.addEventListener("click",()=>{o.optional.footerOption.onClick()});var s=document.createElement("img");s.src="img/plus-circle-solid.svg",s.style.width="14px",s.style.marginRight="5px",s.style.position="relative",s.style.top="-1px",d.appendChild(s);var p=document.createElement("span");p.innerHTML=o.optional.footerOption.label,d.appendChild(p),l.appendChild(d)}return e.elements.input.dropdownContainer=l,n.addEventListener("click",function(t){var n=null!=o.optional.footerOption.label||0!=e.elements.input.dropdown.childNodes.length;t.target.id==o.type+"-input-"+e.id&&n&&(l.style.display="block")}),t.appendChild(l),e.elements.input.container=t,t}return this.getMiniLoader=(()=>'<div class="lds-ring"><div></div><div></div><div></div><div></div></div>'),this.initialize=(()=>{null==window.SFInputSearchInstances?window.SFInputSearchInstances=1:window.SFInputSearchInstances=window.SFInputSearchInstances+1;var t=new a;return t.id=window.SFInputSearchInstances,t.optional.footerOption.label=o.optional.footerOption.label,"function"==typeof o.populate&&(t.populate=o.populate),"function"==typeof o.onSelect&&(t.onSelect=o.onSelect),"function"==typeof o.onRemove&&(t.onRemove=o.onRemove),"function"==typeof o.onEdit&&(t.onEdit=o.onEdit),"function"==typeof o.optional.footerOption.onClick&&(t.optional.footerOption.onClick=o.optional.footerOption.onClick),t.AssembleInputAndPill(),"function"==typeof o.onCreate&&o.onCreate(t),e(document).click(e=>{e.target!=t.elements.input.input&&e.target!=t.elements.input.dropdownContainer&&(t.elements.input.dropdownContainer.style.display="none")}),t}),this.initialize()})}(jQuery);